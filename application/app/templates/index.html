{% extends "bootstrap/base.html" %}

{% block title %} CompareFile {% endblock %}

{% block navbar %}
    <nav class="navbar navbar-default">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">CompareFile</a>
            </div>
        </div>
    </nav>
{% endblock %}

{% block head %}
{{ super() }}
<style>
.fileUpload {
    position: relative;
    overflow: hidden;
}
.fileUpload input.upload {
    position: absolute;
    top: 0;
    right: 0;
    margin: 0;
    padding: 0;
    opacity: 0;
    filter: alpha(opacity=0);
}
</style>
{% endblock %}

{% block content %}
    <div class="container">
        <h1 class="page-header">compfile</h1>

        <div class="well">
            <div class="form-horizontal">
                <div class="form-group">
                    <div class="col-xs-6">
                        <div class="input-group">
                            {{ form_choice.file_left(class="form-control", form="form_choice") }}
                            <div class="input-group-btn">
                                <div class="fileUpload btn btn-primary glyphicon glyphicon-upload">
                                    {{ form_upload_left.file(class="upload", onchange="this.form.submit()", form="form_upload_left") }}
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xs-6">
                        <div class="input-group">
                            {{ form_choice.file_right(class="form-control", form="form_choice") }}
                            <div class="input-group-btn">
                                <div class="fileUpload btn btn-primary glyphicon glyphicon-upload">
                                    {{ form_upload_right.file(class="upload", onchange="this.form.submit()", form="form_upload_right") }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <form id="form_choice" method="post">
                {{ form_choice.hidden_tag() }}
            </form>
            <form id="form_upload_left" method="post" enctype="multipart/form-data">
                {{ form_upload_left.hidden_tag() }}
            </form>
            <form id="form_upload_right" method="post" enctype="multipart/form-data">
                {{ form_upload_right.hidden_tag() }}
            </form>

            <br>
            <div class="container-fluid">
                <button class="btn-lg btn btn-success glyphicon glyphicon-play-circle" type="submit" form="form_choice"></button>
                <a class="pull-right btn-lg btn btn-danger glyphicon glyphicon-trash" href="/delete"></a>
            </div>
        </div>
    </div>

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    <div class="container ">
    {% for message in messages %}
        <div class="alert alert-danger alert-dismissible" role="alert">
            <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
            {{message}}
		</div>
    {% endfor %}
    </div>
    {% endif %}
    {% endwith %}

    {% if table %}
    <div class="container">
        <div class="well">
            <table class="table table-hover">
                <thead>
                    <tr>
                    {% for head in table["thead"] %}
                        <th>{{ head }}</th>
                    {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for key, value in table["tbody"].items() %}
                    <tr>
                        <td>{{ key }}</td>
                        {% for v in value %}
                        <td>{{ v }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    {% endif %}
{% endblock %}
