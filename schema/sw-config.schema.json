{
  "title": "ConfigModel",
  "type": "object",
  "properties": {
    "docker_username": {
      "title": "Docker Username",
      "description": "the docker username of the dockerhub account where the build images are pushed to and which are used as source for the kubernetes images",
      "type": "string"
    },
    "deploy": {
      "title": "Deploy",
      "description": "configuration for the kubernetes deployment",
      "allOf": [
        {
          "$ref": "#/definitions/DeployModel"
        }
      ]
    },
    "metrics": {
      "title": "Metrics",
      "description": "configuration for metrics",
      "default": [],
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/ConfigurePluginModel"
          },
          {
            "type": "string",
            "minLength": 1,
            "maxLength": 2083,
            "format": "uri"
          },
          {
            "type": "string",
            "format": "path"
          }
        ]
      }
    },
    "summarizers": {
      "title": "Summarizers",
      "description": "configuration for summarizers",
      "default": [],
      "type": "array",
      "items": {
        "anyOf": [
          {
            "$ref": "#/definitions/ConfigurePluginModel"
          },
          {
            "type": "string",
            "minLength": 1,
            "maxLength": 2083,
            "format": "uri"
          },
          {
            "type": "string",
            "format": "path"
          }
        ]
      }
    }
  },
  "additionalProperties": false,
  "definitions": {
    "DeployModel": {
      "title": "DeployModel",
      "type": "object",
      "properties": {
        "host": {
          "title": "Host",
          "description": "host name where the application is exposed on the kubernetes cluster",
          "pattern": "^[- _a-zA-Z0-9{}]+$",
          "type": "string"
        }
      },
      "required": [
        "host"
      ],
      "additionalProperties": false
    },
    "ConfigurePluginModel": {
      "title": "ConfigurePluginModel",
      "type": "object",
      "properties": {
        "source": {
          "title": "Source",
          "description": "path to the plugin or url to a git repository for that plugin",
          "anyOf": [
            {
              "type": "string",
              "minLength": 1,
              "maxLength": 2083,
              "format": "uri"
            },
            {
              "type": "string",
              "format": "path"
            }
          ]
        },
        "image_url": {
          "title": "Image Url",
          "description": "dockerhub source of an already build image (allows you to skip the build phase)",
          "type": "string"
        },
        "environment": {
          "title": "Environment",
          "description": "key value pairs that will be environment variables inside of the image, can also be used to generate names of the plugin dynamically",
          "default": {},
          "type": "object",
          "patternProperties": {
            "^[_a-zA-Z]+$": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                },
                {
                  "type": "number"
                },
                {
                  "type": "boolean"
                }
              ]
            }
          }
        }
      },
      "required": [
        "source"
      ],
      "additionalProperties": false
    }
  }
}